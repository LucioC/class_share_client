
#include "dsk6713_aic23.h"			
Uint32 fs=DSK6713_AIC23_FREQ_8KHZ;	
short input, output;
short buffer_in[4000];
int i=0,j; 

long double coef[51] = {-0.00149738848279,  -0.00213787811393,  -0.00135831257432,   0.00130949763173,
   0.00402374250088,   0.00382512589002,  -0.00041577219803,  -0.00577854602712,
  -0.00680497260198,  -0.00059697743272,   0.00890559916029,   0.01262449293201,
   0.00437916215327,  -0.01133432142824,  -0.02036022039293,  -0.01061351018290,
   0.01435476631904,   0.03352114724323,   0.02396400906361,  -0.01623518447082,
  -0.05773095142208,  -0.05538259226871,   0.01798663174889,   0.14466205993521,
   0.26547245061902,   0.31513448527803,   0.26547245061902,   0.14466205993521,
   0.01798663174889,  -0.05538259226871,  -0.05773095142208,  -0.01623518447082,
   0.02396400906361,   0.03352114724323,   0.01435476631904,  -0.01061351018290,
  -0.02036022039293,  -0.01133432142824,   0.00437916215327,   0.01262449293201,
   0.00890559916029,  -0.00059697743272,  -0.00680497260198,  -0.00577854602712,
  -0.00041577219803,   0.00382512589002,   0.00402374250088,   0.00130949763173,
  -0.00135831257432,  -0.00213787811393,  -0.00149738848279};

  int x[50];
  long double y;

interrupt void c_int11()	           
{
 input = input_sample(); 	           
 //output = input; 

 j=0;
 y=0;
	
	for(j=50;j>0;j--)
	{	
		x[j] = x[j-1];
		y += coef[j]*x[j];
	}

	x[0] = input;
	y += coef[0]*x[0];

 output = (int)y;
 output_sample(output);  	           
 buffer_in[i]=input;
 i++;
 if (i>2000) i=0; 
}

main()
{
 comm_intr();				     
 while(1);              		     
}

